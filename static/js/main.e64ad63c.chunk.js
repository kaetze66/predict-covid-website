(this["webpackJsonppredict-covid-website"]=this["webpackJsonppredict-covid-website"]||[]).push([[0],{170:function(e,t,a){var n={"./00_full_results.csv":[419,3],"./results_sd_20_80.csv":[420,4]};function r(e){if(!a.o(n,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=n[e],r=t[0];return a.e(t[1]).then((function(){return a.t(r,7)}))}r.keys=function(){return Object.keys(n)},r.id=170,e.exports=r},217:function(e,t,a){e.exports=a(418)},410:function(e,t,a){},414:function(e,t,a){},415:function(e,t,a){},416:function(e,t,a){},417:function(e,t,a){},418:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),l=a(70),i=a.n(l),s=a(109),o=a.n(s),c=a(171),d=a(25),h=a(172),u=a(187),v=a(14),m=a(52),f=a(181),g=a(182),p=a(55),x=a(186),y=a(188),b=a(5),E=a.n(b),S=a(10),T=a(111),M=a.n(T),O=a(183),k=a(56),X=a.n(k),I=a(112),j=a.n(I),w=a(23),D=a(184),C=function(e){Object(y.a)(a,e);var t=Object(x.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).handleDrag=function(e){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(e):n.state.isSlideMoving&&n.handleSlideDrag(e)},n.handleTouchMove=function(e){null!=e.changedTouches&&e.changedTouches.length>0&&n.handleDrag(e.changedTouches[0])},n.handleDragEnd=function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1});var e=n.getIndex({startX:n.state.startX,endX:n.state.endX}),t=e.startIndex,a=e.endIndex;n.setState({startX:n.scale(t),endX:n.scale(a)})},n.handleLeaveWrapper=function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=setTimeout(n.handleDragEnd,n.props.leaveTimeOut))},n.handleEnterSlideOrTraveller=function(){n.setState({isTextActive:!0})},n.handleLeaveSlideOrTraveller=function(){n.setState({isTextActive:!1})},n.handleSlideDragStart=function(e){var t=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:t.pageX})},n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(Object(p.a)(n),"startX"),endX:n.handleTravellerDragStart.bind(Object(p.a)(n),"endX")},n.state=e.data&&e.data.length?n.updateScale(e):{},n}return Object(g.a)(a,[{key:"componentWillReceiveProps",value:function(e){var t=this,a=this.props,n=a.data,r=a.width,l=a.x,i=a.travellerWidth,s=a.updateId;(e.data!==n||e.updateId!==s)&&e.data&&e.data.length?this.setState(this.updateScale(e)):e.width===r&&e.x===l&&e.travellerWidth===i||(this.scale.range([e.x,e.x+e.width-e.travellerWidth]),this.scaleValues=this.scale.domain().map((function(e){return t.scale(e)})),this.setState({startX:this.scale(e.startIndex),endX:this.scale(e.endIndex)}))}},{key:"componentWillUnmount",value:function(){this.scale=null,this.scaleValues=null,this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null)}},{key:"getIndex",value:function(e){var t=e.startX,a=e.endX,n=this.props.gap,r=Math.min(t,a),l=Math.max(t,a),i=this.constructor.getIndexInRange(this.scaleValues,r),s=this.constructor.getIndexInRange(this.scaleValues,l);return{startIndex:Math.round(i/n)*n,endIndex:Math.round(s/n)*n}}},{key:"getTextOfTick",value:function(e){var t=this.props,a=t.data,n=t.tickFormatter,r=t.dataKey,l=Object(O.getValueByDataKey)(a[e],r,e);return M.a.isFunction(n)?n(l):l}},{key:"handleSlideDrag",value:function(e){var t=this.state,a=t.slideMoveStartX,n=t.startX,r=t.endX,l=this.props,i=l.x,s=l.width,o=l.travellerWidth,c=l.startIndex,d=l.endIndex,h=l.onChange,u=e.pageX-a;u>0?u=Math.min(u,i+s-o-r,i+s-o-n):u<0&&(u=Math.max(u,i-n,i-r));var v=this.getIndex({startX:n+u,endX:r+u});v.startIndex===c&&v.endIndex===d||!h||h(v),this.setState({startX:n+u,endX:r+u,slideMoveStartX:e.pageX})}},{key:"handleTravellerDragStart",value:function(e,t){var a=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:e,brushMoveStartX:a.pageX})}},{key:"handleTravellerMove",value:function(e){var t,a=this.state,n=a.brushMoveStartX,r=a.movingTravellerId,l=a.endX,i=a.startX,s=this.state[r],o=this.props,c=o.x,d=o.width,h=o.travellerWidth,u=o.onChange,v=o.gap,f=o.data,g={startX:this.state.startX,endX:this.state.endX},p=e.pageX-n;p>0?p=Math.min(p,c+d-h-s):p<0&&(p=Math.max(p,c-s)),g[r]=s+p;var x=this.getIndex(g),y=x.startIndex,b=x.endIndex;this.setState((t={},Object(m.a)(t,r,s+p),Object(m.a)(t,"brushMoveStartX",e.pageX),t),(function(){u&&function(){var e=f.length-1;return"startX"===r&&(l>i?y%v===0:b%v===0)||l<i&&b===e||"endX"===r&&(l>i?b%v===0:y%v===0)||l>i&&b===e}()&&u(x)}))}},{key:"updateScale",value:function(e){var t=this,a=e.data,n=e.startIndex,r=e.endIndex,l=e.x,i=e.width,s=e.travellerWidth,o=a.length;return this.scale=Object(S.scalePoint)().domain(M.a.range(0,o)).range([l,l+i-s]),this.scaleValues=this.scale.domain().map((function(e){return t.scale(e)})),{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,startX:this.scale(n),endX:this.scale(r)}}},{key:"renderBackground",value:function(){var e=this.props,t=e.x,a=e.y,n=e.width,l=e.height,i=e.fill,s=e.stroke;return r.a.createElement("rect",{stroke:s,fill:i,x:t,y:a,width:n,height:l})}},{key:"renderPanorama",value:function(){var e=this.props,t=e.x,a=e.y,l=e.width,i=e.height,s=e.data,o=e.children,c=e.padding,d=n.Children.only(o);return d?r.a.cloneElement(d,{x:t,y:a,width:l,height:i,margin:c,compact:!0,data:s}):null}},{key:"renderTraveller",value:function(e,t){var a=this.props,n=a.y,l=a.travellerWidth,i=a.height,s=a.stroke,o=Math.floor(n+i/2)-1,c=Math.max(e,this.props.x);return r.a.createElement(X.a,{className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[t],onTouchStart:this.travellerDragStartHandlers[t],style:{cursor:"col-resize"}},r.a.createElement("rect",{x:c,y:n,width:l,height:i,fill:s,stroke:"none"}),r.a.createElement("line",{x1:c+1,y1:o,x2:c+l-1,y2:o,fill:"none",stroke:"#fff"}),r.a.createElement("line",{x1:c+1,y1:o+2,x2:c+l-1,y2:o+2,fill:"none",stroke:"#fff"}))}},{key:"renderSlide",value:function(e,t){var a=this.props,n=a.y,l=a.height,i=a.stroke;return r.a.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:i,fillOpacity:.2,x:Math.min(e,t),y:n,width:Math.abs(t-e),height:l})}},{key:"renderText",value:function(){var e=this.props,t=e.startIndex,a=e.endIndex,n=e.y,l=e.height,i=e.travellerWidth,s={pointerEvents:"none",fill:e.stroke};return r.a.createElement(X.a,{className:"recharts-brush-texts"},r.a.createElement(j.a,Object.assign({textAnchor:"end",verticalAnchor:"middle",x:Math.min(this.scaleValues[t],this.scaleValues[a])-5,y:n+l/2},s),this.getTextOfTick(t)),r.a.createElement(j.a,Object.assign({textAnchor:"start",verticalAnchor:"middle",x:Math.max(this.scaleValues[t],this.scaleValues[a])+i+5,y:n+l/2},s),this.getTextOfTick(a)))}},{key:"render",value:function(){var e=this.props,t=e.data,a=e.className,n=e.children,l=e.x,i=e.y,s=e.width,o=e.height,c=e.alwaysShowText,d=this.state,h=d.startX,u=d.endX,v=d.isTextActive,m=d.isSlideMoving,f=d.isTravellerMoving;if(!t||!t.length||!Object(w.isNumber)(l)||!Object(w.isNumber)(i)||!Object(w.isNumber)(s)||!Object(w.isNumber)(o)||s<=0||o<=0)return null;var g=E()("recharts-brush",a),p=1===r.a.Children.count(n),x=Object(D.generatePrefixStyle)("userSelect","none"),y=this.getIndex({startX:h,endX:u}),b=y.startIndex,S=y.endIndex,T=this.scale(b),M=this.scale(S);return r.a.createElement(X.a,{className:g,onMouseMove:this.handleDrag,onMouseLeave:this.handleLeaveWrapper,onMouseUp:this.handleDragEnd,onTouchEnd:this.handleDragEnd,onTouchMove:this.handleTouchMove,style:x},this.renderBackground(),p&&this.renderPanorama(),this.renderSlide(T,M),this.renderTraveller(T,"startX"),this.renderTraveller(M,"endX"),(v||m||f||c)&&this.renderText())}}],[{key:"getIndexInRange",value:function(e,t){for(var a=0,n=e.length-1;n-a>1;){var r=Math.floor((a+n)/2);e[r]>t?n=r:a=r}return t>=e[n]?n:a}}]),a}(n.PureComponent);C.displayName="Brush",C.defaultProps={height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1};var N=C,F=(a(410),N),W=[{name:"Infected asymptomatic",color:"#FFDC00"},{name:"Infected symptomatic",color:"#FF851B"},{name:"Critical Cases",color:"#FF4136"},{name:"Diseased",color:"#111111"},{name:"Susceptible",color:"#7FDBFF"},{name:"Isolated",color:"#001f3f"},{name:"Recovered",color:"#2ECC40"}];function V(e){var t=e.loading,a=e.data,l=e.config,i=Object(n.useState)({startIndex:0,endIndex:20}),s=Object(d.a)(i,2),o=s[0],c=s[1];if(t||!a)return null;var m=a.map((function(e){return e["total infected"]})),f=m.indexOf(Math.max.apply(Math,Object(u.a)(m)));return r.a.createElement("div",{className:"Visualizations"},r.a.createElement(v.f,null,r.a.createElement(v.b,{data:a,margin:{top:10,right:30,left:0,bottom:0}},r.a.createElement("defs",null,W.map((function(e){return r.a.createElement("linearGradient",{key:e.name,id:"color".concat(e.name.replace(/ /g,"")),x1:"0",y1:"0",x2:"0",y2:"1"},r.a.createElement("stop",{offset:"5%",stopColor:e.color,stopOpacity:.8}),r.a.createElement("stop",{offset:"95%",stopColor:e.color,stopOpacity:.5}))}))),r.a.createElement(v.h,{dataKey:"index",interval:19}),r.a.createElement(v.i,{type:"number",domain:[0,function(e){return Math.round(e)}],width:75}),r.a.createElement(v.c,{strokeDasharray:"3 3"}),r.a.createElement(v.g,null),W.map((function(e){return r.a.createElement(v.a,{key:e.name,type:"monotone",dataKey:e.name,stackId:"1",fillOpacity:1,stroke:e.color,fill:"url(#color".concat(e.name.replace(/ /g,""),")")})})),r.a.createElement(v.e,{isFront:!0,x:f,stroke:"#444",label:function(e){var t=e.viewBox;return r.a.createElement(v.d,{viewBox:Object(h.a)({},t,{y:15,height:0}),position:"right",angle:90,offset:15},"First peak (day ".concat(f,")"))}}))),r.a.createElement(v.f,null,r.a.createElement(v.b,{data:a,margin:{top:10,right:30,left:75,bottom:0}},r.a.createElement(F,{startIndex:o.startIndex,endIndex:o.endIndex,className:E()({disabled:!l.socialDistancing&&!l.selfQuarantine}),onChange:c,gap:10}))))}var B=a(185),L=a.n(B);function _(e){var t="".concat(A.join(";"),"\n").concat(e);return L.a.parse(t,{header:!0,transformHeader:function(e){return e||"index"},transform:function(e){return+e},skipEmptyLines:!0}).data}var A=["index","Infected asymptomatic","Infected symptomatic","Critical Cases","Diseased","Susceptible","Isolated","Recovered","total infected","accumulated cases"],P=a(113),R=a.n(P);a(414);function Q(e){var t=e.loading,a=e.onConfigUpdate,l=Object(n.useState)(!1),i=Object(d.a)(l,2),s=i[0],o=i[1],c=Object(n.useState)(!1),h=Object(d.a)(c,2),u=h[0],v=h[1],m=Object(n.useRef)(!0);return Object(n.useEffect)((function(){m.current?m.current=!1:(console.log("configupdat"),a({socialDistancing:s,selfQuarantine:u}))}),[s,u,a]),t?null:r.a.createElement("div",{className:"Configuration"},r.a.createElement("div",null,r.a.createElement(R.a,{id:"socialDistancing",checked:s,onChange:function(){return o((function(e){return!e}))}}),r.a.createElement("label",{htmlFor:"socialDistancing"},"Social Distancing")),r.a.createElement("div",null,r.a.createElement(R.a,{id:"selfQuarantine",checked:u,onChange:function(){return v((function(e){return!e}))}}),r.a.createElement("label",{htmlFor:"selfQuarantine"},"Self Quarantine")))}a(415),a(416);function U(){var e=Object(n.useState)({socialDistancing:!1,selfQuarantine:!1}),t=Object(d.a)(e,2),l=t[0],i=t[1],s=Object(n.useState)(!1),h=Object(d.a)(s,2),u=h[0],v=h[1],m=Object(n.useState)(null),f=Object(d.a)(m,2),g=f[0],p=f[1],x="results_sd_20_80.csv";return Object(n.useEffect)((function(){v(!0),console.log(a(170)("./".concat(x))),a(170)("./".concat(x)).then(function(){var e=Object(c.a)(o.a.mark((function e(t){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.default,e.next=3,fetch(a).then((function(e){return e.text()}));case 3:n=e.sent,p(_(n)),v(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[x]),r.a.createElement("div",{className:"App"},r.a.createElement("header",null,r.a.createElement("div",{className:"headerContent"},r.a.createElement("h1",null,"Covid Progress"),r.a.createElement("p",null,r.a.createElement("span",null,"Covid-19")," outbreak prediction in Switzerland"))),r.a.createElement("div",{className:"firstVisualization"},r.a.createElement("aside",null,r.a.createElement(Q,{loading:u,onConfigUpdate:i})),r.a.createElement("main",null,r.a.createElement(V,{loading:u,data:g,config:l}))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(417);i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(U,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[217,1,2]]]);
//# sourceMappingURL=main.e64ad63c.chunk.js.map